$(document).ready(function() {
var drugs = [
		{
		"eligible":'#HKYab4TIAXs-uGIJ6IdkP7Q-val',
		"available":'#sA9bxsRppLr-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#cCoaev12dkA-lxM1zKPHql2-val', '#cCoaev12dkA-BQrHxULahIt-val', '#cCoaev12dkA-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#P6nVr0o4O8O-uGIJ6IdkP7Q-val',
		"available":'#cCCL5yNl301-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#BJpjOFTE4By-lxM1zKPHql2-val', '#BJpjOFTE4By-BQrHxULahIt-val', '#BJpjOFTE4By-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#W9g7M8URMFw-uGIJ6IdkP7Q-val',
		"available":'#ZrjzeUlhXGt-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#BziHjcQApsK-lxM1zKPHql2-val', '#BziHjcQApsK-BQrHxULahIt-val', '#BziHjcQApsK-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#D9UegHR72F7-uGIJ6IdkP7Q-val',
		"available":'#Kj2VNr4bNmK-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#gS1q4X2MVoZ-lxM1zKPHql2-val', '#gS1q4X2MVoZ-BQrHxULahIt-val', '#gS1q4X2MVoZ-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#YdumyTaJeaY-uGIJ6IdkP7Q-val',
		"available":'#IctQGELdKnU-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#KsCk2qDzS64-lxM1zKPHql2-val', '#KsCk2qDzS64-BQrHxULahIt-val', '#KsCk2qDzS64-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#KhlPt64ioMc-uGIJ6IdkP7Q-val',
		"available":'#ySw4xVVyeJm-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#In36kh0TzrP-lxM1zKPHql2-val', '#In36kh0TzrP-BQrHxULahIt-val', '#In36kh0TzrP-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#DPxobo6eezJ-uGIJ6IdkP7Q-val',
		"available":'#gOnXFvuLClY-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#GCAsIyAZwOK-lxM1zKPHql2-val', '#GCAsIyAZwOK-BQrHxULahIt-val', '#GCAsIyAZwOK-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#R5wsRAcTOtA-uGIJ6IdkP7Q-val',
		"available":'#n0X9iB1Z5uS-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#BA15xJDbRj9-lxM1zKPHql2-val', '#BA15xJDbRj9-BQrHxULahIt-val', '#BA15xJDbRj9-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#evvqSpYy99J-uGIJ6IdkP7Q-val',
		"available":'#AT7PchtF6Jy-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#IvHr1VP6TuX-lxM1zKPHql2-val', '#IvHr1VP6TuX-BQrHxULahIt-val', '#IvHr1VP6TuX-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#mzbVXqclpu5-uGIJ6IdkP7Q-val',
		"available":'#kolbisAPN7E-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#zKdLjb0BCd9-lxM1zKPHql2-val', '#zKdLjb0BCd9-BQrHxULahIt-val', '#zKdLjb0BCd9-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#tAwlvOWI8B7-uGIJ6IdkP7Q-val',
		"available":'#uidgoKCVqH5-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#eTyCergUgzE-lxM1zKPHql2-val', '#eTyCergUgzE-BQrHxULahIt-val', '#eTyCergUgzE-TrmsDE6SUZI-val' ]
		},
		"eligible":'#LJB7RfGvrG0-uGIJ6IdkP7Q-val',
		"available":'#YWDoPIllkt0-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#C5ewV9j0Mn2-lxM1zKPHql2-val', '#C5ewV9j0Mn2-BQrHxULahIt-val', '#C5ewV9j0Mn2-TrmsDE6SUZI-val' ]
		},
		{
		"eligible":'#ZvujG4RrPc1-uGIJ6IdkP7Q-val',
		"available":'#osJioPTXB4g-uGIJ6IdkP7Q-val',
		"notAvailable":[ '#M5zy8zoP7EH-lxM1zKPHql2-val', '#M5zy8zoP7EH-BQrHxULahIt-val', '#M5zy8zoP7EH-TrmsDE6SUZI-val' ]
		}
	];// Ids of all Fields on dataset
	function saveOnAutoChange(currentDataElementComboStr) {
		// Save after Auto change
		var dataElementComboStr = currentDataElementComboStr.substr(currentDataElementComboStr.indexOf("#") + 1);
		dataElementId=dataElementComboStr.split(/\-/)[0];
		optionComboId=dataElementComboStr.split(/\-/)[1];
		saveBoolean( dataElementId, optionComboId );
	}
	function enableAndDisableFieldsOnSelectActionsAccordingly() {
		$.each(drugs, function(index, drug) {
			// Disabling of all "Available?" column inputs and Removal of False option for all "If No" columns inputs
			$(drug.notAvailable.join(',')+','+drug.available).attr('disabled', 'true');
			//$(drug.notAvailable.join(',')).find('option[value="false"]').val('');
			$(drug.notAvailable.join(',')).find('option[value="false"]').remove();
			// Disabling and enabling of "Available?" and "If No" fields on value changes
			$(drug.eligible).on('change', function() {
				if( ($(drug.eligible).val()=='false') || ($(drug.eligible).val()=='') )  {
					$(drug.notAvailable.join(',')+','+drug.available).attr('disabled', 'true').val('');
				}else if($(drug.eligible).val()=='true') {
					$(drug.available).removeAttr('disabled');
				};
			});
			$(drug.available).on('change', function() {
				if( ($(drug.available).val()=='true') || ($(drug.available).val()=='') )  {
					$(drug.notAvailable.join(',')).attr('disabled', 'true').val('');
					$.each(drug.notAvailable, function(index, value) {
						$(value).on('change', function() {
							if( ($(value).val()=='true'))  {
								$(drug.notAvailable.join(',')).not(value).attr('disabled', 'true');
								saveOnAutoChange(value);
							}else{
								$(drug.notAvailable.join(',')).not(value).removeAttr('disabled');
								saveOnAutoChange(value);
							};
						});
					});
				}else if($(drug.available).val()=='false') {
					$(drug.notAvailable.join(',')).removeAttr('disabled');
					$.each(drug.notAvailable, function(index, value) {
					$(value).on('change', function() {
						if( ($(value).val()=='true'))  {
							$(drug.notAvailable.join(',')).not(value).attr('disabled', 'true');
							saveOnAutoChange(value);
						}else{
							$(drug.notAvailable.join(',')).not(value).removeAttr('disabled');
							saveOnAutoChange(value);
						};
					});
				});
				};
			});
			$.each(drug.notAvailable, function(index, value) {
				$(value).on('change', function() {
					if( ($(value).val()=='true'))  {
						$(drug.notAvailable.join(',')).not(value).attr('disabled', 'true');
						saveOnAutoChange(value);
					}else{
						$(drug.notAvailable.join(',')).not(value).removeAttr('disabled');
						saveOnAutoChange(value);
					};
				});
			});
			// Disabling and enabling of "Available?" and "If No" fields based on already filled values
			if( ($(drug.eligible).val()+''=='false') || ($(drug.eligible).val()=='') )  {
				$(drug.notAvailable.join(',')+','+drug.available).attr('disabled', 'true').val('');
				saveOnAutoChange(drug.available);
			}else if($(drug.eligible).val()+''=='true') {
				$(drug.available).removeAttr('disabled');
				saveOnAutoChange(drug.available);
			};
			if( ($(drug.available).val()+''=='true') || ($(drug.available).val()=='') )  {
				$(drug.notAvailable.join(',')).attr('disabled', 'true').val('');
				$.each(drug.notAvailable, function(index, value) {
					saveOnAutoChange(value);
				});
			}else if($(drug.available).val()+''=='false') {
				$(drug.notAvailable.join(',')).removeAttr('disabled');
				$.each(drug.notAvailable, function(index, value) {
					saveOnAutoChange(value);
				});
			};
		});
	}
	// Run on first Fresh Data Entry form.
	enableAndDisableFieldsOnSelectActionsAccordingly();
	// Event trigger on Orgunit/Period Switching
	$( 'body' ).bind( 'dhis-web-dataentry-form-loaded', function() {
		alert('Tracer Medicine Form Loaded Completely');
		enableAndDisableFieldsOnSelectActionsAccordingly();
	} );
});
